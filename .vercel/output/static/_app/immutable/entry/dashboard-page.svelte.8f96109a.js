import{S as G,i as J,s as K,k,a as L,l as p,m as w,h as b,c as V,n as E,ae as Z,b as R,D as y,a6 as ge,R as O,af as x,a5 as _e,I as $,J as ee,Q as te,T as be,y as N,z as U,A as W,g as q,d as F,B as j,q as B,r as M,o as me,u as ve,f as Ee,v as ye}from"../chunks/index.8015430d.js";import{s as Y}from"../chunks/superbaseClient.4f021c0e.js";import{A as ke}from"../chunks/Auth.676f6375.js";import"../chunks/ProgressBar.svelte_svelte_type_style_lang.3f362358.js";function pe(a){const e=["ArrowRight","ArrowUp","ArrowLeft","ArrowDown","Home","End"],t=l=>{if(e.includes(l.code))switch(l.preventDefault(),l.code){case"ArrowUp":P(a,0,-1);break;case"ArrowDown":P(a,0,1);break;case"ArrowLeft":P(a,-1,0);break;case"ArrowRight":P(a,1,0);break;case"Home":le(a,"first");break;case"End":le(a,"last");break}};return a.addEventListener("keydown",t),{destroy(){a.removeEventListener("keydown",t)}}}function P(a,e,t){const l=document.activeElement;if(!l||!l.parentElement||!l.parentElement.ariaRowIndex||!l.ariaColIndex)return;const n=parseInt(l.parentElement.ariaRowIndex),s=parseInt(l.ariaColIndex),r=a.querySelector(`[aria-rowindex="${n+t}"]`);if(r!==null){const d=r.querySelector(`[aria-colindex="${s+e}"]`);d!==null&&d.focus()}}function we(a){const e=document.activeElement;if(!e||!e.parentElement||!e.parentElement.ariaRowIndex)return null;const t=parseInt(e.parentElement.ariaRowIndex);return a.querySelector(`[aria-rowindex="${t}"]`)}function le(a,e="first"){const t=we(a);if(t===null)return;const l=t.children.length,n=e==="first"?1:l,s=t.querySelector(`[aria-colindex="${n}"]`);s!==null&&s.focus()}function Ie(a,e){return a.map(t=>{const l={};return e.forEach(n=>l[n]=t[n]),l})}function Ce(a){return a.map(e=>Object.values(e))}function ae(a,e){return Ce(Ie(a,e))}function ne(a,e,t){const l=a.slice();return l[19]=e[t],l}function re(a,e,t){const l=a.slice();return l[22]=e[t],l[24]=t,l}function oe(a,e,t){const l=a.slice();return l[19]=e[t],l[26]=t,l}function se(a,e,t){const l=a.slice();return l[27]=e[t],l}function ie(a){let e,t=a[27]+"";return{c(){e=k("th"),this.h()},l(l){e=p(l,"TH",{class:!0});var n=w(e);n.forEach(b),this.h()},h(){E(e,"class",a[3])},m(l,n){R(l,e,n),e.innerHTML=t},p(l,n){n&1&&t!==(t=l[27]+"")&&(e.innerHTML=t),n&8&&E(e,"class",l[3])},d(l){l&&b(e)}}}function ce(a){let e,t=(a[19]?a[19]:"-")+"";return{c(){e=k("td"),this.h()},l(l){e=p(l,"TD",{class:!0,role:!0,"aria-colindex":!0,tabindex:!0});var n=w(e);n.forEach(b),this.h()},h(){E(e,"class",a[5]),E(e,"role","gridcell"),E(e,"aria-colindex",a[26]+1),E(e,"tabindex",a[26]===0?0:-1)},m(l,n){R(l,e,n),e.innerHTML=t},p(l,n){n&1&&t!==(t=(l[19]?l[19]:"-")+"")&&(e.innerHTML=t),n&32&&E(e,"class",l[5])},d(l){l&&b(e)}}}function fe(a){let e,t,l,n,s=a[22],r=[];for(let o=0;o<s.length;o+=1)r[o]=ce(oe(a,s,o));function d(...o){return a[15](a[24],...o)}function i(...o){return a[16](a[24],...o)}return{c(){e=k("tr");for(let o=0;o<r.length;o+=1)r[o].c();t=L(),this.h()},l(o){e=p(o,"TR",{"aria-rowindex":!0});var g=w(e);for(let m=0;m<r.length;m+=1)r[m].l(g);t=V(g),g.forEach(b),this.h()},h(){E(e,"aria-rowindex",a[24]+1)},m(o,g){R(o,e,g);for(let m=0;m<r.length;m+=1)r[m]&&r[m].m(e,null);y(e,t),l||(n=[te(e,"click",d),te(e,"keydown",i)],l=!0)},p(o,g){if(a=o,g&33){s=a[22];let m;for(m=0;m<s.length;m+=1){const I=oe(a,s,m);r[m]?r[m].p(I,g):(r[m]=ce(I),r[m].c(),r[m].m(e,t))}for(;m<r.length;m+=1)r[m].d(1);r.length=s.length}},d(o){o&&b(e),x(r,o),l=!1,be(n)}}}function ue(a){let e,t,l,n=a[0].foot,s=[];for(let r=0;r<n.length;r+=1)s[r]=de(ne(a,n,r));return{c(){e=k("tfoot"),t=k("tr");for(let r=0;r<s.length;r+=1)s[r].c();this.h()},l(r){e=p(r,"TFOOT",{class:!0});var d=w(e);t=p(d,"TR",{});var i=w(t);for(let o=0;o<s.length;o+=1)s[o].l(i);i.forEach(b),d.forEach(b),this.h()},h(){E(e,"class",l="table-foot "+a[6])},m(r,d){R(r,e,d),y(e,t);for(let i=0;i<s.length;i+=1)s[i]&&s[i].m(t,null)},p(r,d){if(d&129){n=r[0].foot;let i;for(i=0;i<n.length;i+=1){const o=ne(r,n,i);s[i]?s[i].p(o,d):(s[i]=de(o),s[i].c(),s[i].m(t,null))}for(;i<s.length;i+=1)s[i].d(1);s.length=n.length}d&64&&l!==(l="table-foot "+r[6])&&E(e,"class",l)},d(r){r&&b(e),x(s,r)}}}function de(a){let e,t=a[19]+"";return{c(){e=k("td"),this.h()},l(l){e=p(l,"TD",{class:!0});var n=w(e);n.forEach(b),this.h()},h(){E(e,"class",a[7])},m(l,n){R(l,e,n),e.innerHTML=t},p(l,n){n&1&&t!==(t=l[19]+"")&&(e.innerHTML=t),n&128&&E(e,"class",l[7])},d(l){l&&b(e)}}}function De(a){let e,t,l,n,s,r,d,i,o,g,m,I,C=a[0].head,_=[];for(let u=0;u<C.length;u+=1)_[u]=ie(se(a,C,u));let H=a[0].body,h=[];for(let u=0;u<H.length;u+=1)h[u]=fe(re(a,H,u));let D=a[0].foot&&ue(a);return{c(){e=k("div"),t=k("table"),l=k("thead"),n=k("tr");for(let u=0;u<_.length;u+=1)_[u].c();r=L(),d=k("tbody");for(let u=0;u<h.length;u+=1)h[u].c();o=L(),D&&D.c(),this.h()},l(u){e=p(u,"DIV",{class:!0});var v=w(e);t=p(v,"TABLE",{class:!0,role:!0});var c=w(t);l=p(c,"THEAD",{class:!0});var f=w(l);n=p(f,"TR",{});var T=w(n);for(let A=0;A<_.length;A+=1)_[A].l(T);T.forEach(b),f.forEach(b),r=V(c),d=p(c,"TBODY",{class:!0});var S=w(d);for(let A=0;A<h.length;A+=1)h[A].l(S);S.forEach(b),o=V(c),D&&D.l(c),c.forEach(b),v.forEach(b),this.h()},h(){E(l,"class",s="table-head "+a[2]),E(d,"class",i="table-body "+a[4]),E(t,"class",a[8]),E(t,"role","grid"),Z(t,"table-interactive",a[1]),E(e,"class",g="table-container "+a[9])},m(u,v){R(u,e,v),y(e,t),y(t,l),y(l,n);for(let c=0;c<_.length;c+=1)_[c]&&_[c].m(n,null);y(t,r),y(t,d);for(let c=0;c<h.length;c+=1)h[c]&&h[c].m(d,null);y(t,o),D&&D.m(t,null),m||(I=ge(pe.call(null,t)),m=!0)},p(u,[v]){if(v&9){C=u[0].head;let c;for(c=0;c<C.length;c+=1){const f=se(u,C,c);_[c]?_[c].p(f,v):(_[c]=ie(f),_[c].c(),_[c].m(n,null))}for(;c<_.length;c+=1)_[c].d(1);_.length=C.length}if(v&4&&s!==(s="table-head "+u[2])&&E(l,"class",s),v&3105){H=u[0].body;let c;for(c=0;c<H.length;c+=1){const f=re(u,H,c);h[c]?h[c].p(f,v):(h[c]=fe(f),h[c].c(),h[c].m(d,null))}for(;c<h.length;c+=1)h[c].d(1);h.length=H.length}v&16&&i!==(i="table-body "+u[4])&&E(d,"class",i),u[0].foot?D?D.p(u,v):(D=ue(u),D.c(),D.m(t,null)):D&&(D.d(1),D=null),v&256&&E(t,"class",u[8]),v&258&&Z(t,"table-interactive",u[1]),v&512&&g!==(g="table-container "+u[9])&&E(e,"class",g)},i:O,o:O,d(u){u&&b(e),x(_,u),x(h,u),D&&D.d(),m=!1,I()}}}function Te(a,e,t){let l,n;const s=_e();let{source:r}=e,{interactive:d=!1}=e,{element:i="table"}=e,{text:o=""}=e,{color:g=""}=e,{regionHead:m=""}=e,{regionHeadCell:I=""}=e,{regionBody:C=""}=e,{regionCell:_=""}=e,{regionFoot:H=""}=e,{regionFootCell:h=""}=e;function D(f,T){if(!d)return;f.preventDefault(),f.stopPropagation();const S=r.meta?r.meta[T]:r.body[T];s("selected",S)}function u(f,T){["Enter","Space"].includes(f.code)&&D(f,T)}const v=(f,T)=>{D(T,f)},c=(f,T)=>{u(T,f)};return a.$$set=f=>{t(18,e=$($({},e),ee(f))),"source"in f&&t(0,r=f.source),"interactive"in f&&t(1,d=f.interactive),"element"in f&&t(12,i=f.element),"text"in f&&t(13,o=f.text),"color"in f&&t(14,g=f.color),"regionHead"in f&&t(2,m=f.regionHead),"regionHeadCell"in f&&t(3,I=f.regionHeadCell),"regionBody"in f&&t(4,C=f.regionBody),"regionCell"in f&&t(5,_=f.regionCell),"regionFoot"in f&&t(6,H=f.regionFoot),"regionFootCell"in f&&t(7,h=f.regionFootCell)},a.$$.update=()=>{t(9,l=`${e.class||""}`),a.$$.dirty&28672&&t(8,n=`${i} ${o} ${g}`)},e=ee(e),[r,d,m,I,C,_,H,h,n,l,D,u,i,o,g,v,c]}class He extends G{constructor(e){super(),J(this,e,Te,De,K,{source:0,interactive:1,element:12,text:13,color:14,regionHead:2,regionHeadCell:3,regionBody:4,regionCell:5,regionFoot:6,regionFootCell:7})}}function Ae(a){let e,t,l;return t=new He({props:{source:a[0]}}),{c(){e=k("section"),N(t.$$.fragment)},l(n){e=p(n,"SECTION",{});var s=w(e);U(t.$$.fragment,s),s.forEach(b)},m(n,s){R(n,e,s),W(t,e,null),l=!0},p:O,i(n){l||(q(t.$$.fragment,n),l=!0)},o(n){F(t.$$.fragment,n),l=!1},d(n){n&&b(e),j(t)}}}function Re(a){let e=[{name:"patrick",points:2,wins:0},{name:"fred",points:4,wins:1}];return[{head:["name","Points","Wins"],body:ae(e,["name","points","wins"]),meta:ae(e,["name","points","wins"])}]}class Se extends G{constructor(e){super(),J(this,e,Re,Ae,K,{})}}function he(a){var m;let e,t,l,n,s,r,d,i=((m=a[0])==null?void 0:m.games.game_table)+"",o,g;return{c(){e=k("aside"),t=k("div"),l=k("h3"),n=B("Your game has started"),s=L(),r=k("p"),d=B("You're playing at table "),o=B(i),g=B(" sitting in seat 1"),this.h()},l(I){e=p(I,"ASIDE",{class:!0});var C=w(e);t=p(C,"DIV",{class:!0});var _=w(t);l=p(_,"H3",{});var H=w(l);n=M(H,"Your game has started"),H.forEach(b),s=V(_),r=p(_,"P",{});var h=w(r);d=M(h,"You're playing at table "),o=M(h,i),g=M(h," sitting in seat 1"),h.forEach(b),_.forEach(b),C.forEach(b),this.h()},h(){E(t,"class","alert-message"),E(e,"class","alert variant-ghost-primary mb-8")},m(I,C){R(I,e,C),y(e,t),y(t,l),y(l,n),y(t,s),y(t,r),y(r,d),y(r,o),y(r,g)},p(I,C){var _;C&1&&i!==(i=((_=I[0])==null?void 0:_.games.game_table)+"")&&ve(o,i)},d(I){I&&b(e)}}}function Le(a){var D,u;let e,t,l,n,s,r,d,i,o,g,m,I,C,_,H,h=((u=(D=a[0])==null?void 0:D.games)==null?void 0:u.active)&&he(a);return _=new Se({}),{c(){e=k("section"),t=k("div"),h&&h.c(),l=L(),n=k("div"),s=k("div"),r=k("div"),d=k("div"),i=B("0"),o=L(),g=k("div"),m=B("Bounty Points"),I=L(),C=k("div"),N(_.$$.fragment),this.h()},l(v){e=p(v,"SECTION",{});var c=w(e);t=p(c,"DIV",{class:!0});var f=w(t);h&&h.l(f),l=V(f),n=p(f,"DIV",{class:!0});var T=w(n);s=p(T,"DIV",{class:!0});var S=w(s);r=p(S,"DIV",{class:!0});var A=w(r);d=p(A,"DIV",{class:!0});var z=w(d);i=M(z,"0"),z.forEach(b),o=V(A),g=p(A,"DIV",{class:!0});var Q=w(g);m=M(Q,"Bounty Points"),Q.forEach(b),A.forEach(b),S.forEach(b),I=V(T),C=p(T,"DIV",{class:!0});var X=w(C);U(_.$$.fragment,X),X.forEach(b),T.forEach(b),f.forEach(b),c.forEach(b),this.h()},h(){E(d,"class","text-5xl mb-2"),E(g,"class","text-2xl font-bold"),E(r,"class","card p-5 text-center;"),E(s,"class","col-span-1"),E(C,"class","col-span-2"),E(n,"class","grid grid-cols-1 md:grid-cols-3 md:gap-6 gap-y-6"),E(t,"class","py-8 px-4 mx-auto max-w-screen-xl sm:py-16 lg:px-6")},m(v,c){R(v,e,c),y(e,t),h&&h.m(t,null),y(t,l),y(t,n),y(n,s),y(s,r),y(r,d),y(d,i),y(r,o),y(r,g),y(g,m),y(n,I),y(n,C),W(_,C,null),H=!0},p(v,[c]){var f,T;(T=(f=v[0])==null?void 0:f.games)!=null&&T.active?h?h.p(v,c):(h=he(v),h.c(),h.m(t,l)):h&&(h.d(1),h=null)},i(v){H||(q(_.$$.fragment,v),H=!0)},o(v){F(_.$$.fragment,v),H=!1},d(v){v&&b(e),h&&h.d(),j(_)}}}function Ve(a,e,t){let{session:l}=e,n=!1,s="",r;me(()=>{d(),i()});const d=async()=>{try{n=!0;const{user:o}=l,{data:g,error:m,status:I}=await Y.from("profiles").select("username").eq("id",o.id).single();if(m&&I!==406)throw m;g&&(s=g.username)}catch(o){o instanceof Error&&alert(o.message)}finally{n=!1}},i=async()=>{try{n=!0;const{user:o}=l,{data:g,error:m,status:I}=await Y.from("game_players").select("game_id, games(*)").eq("player_id",o.id).eq("games.active",!0).single();if(m&&I!==406)throw m;g&&(t(0,r=g),console.log(r))}catch(o){o instanceof Error&&alert(o.message)}finally{n=!1}};return a.$$set=o=>{"session"in o&&t(1,l=o.session)},[r,l]}class Be extends G{constructor(e){super(),J(this,e,Ve,Le,K,{session:1})}}function Me(a){let e,t;return e=new Be({props:{session:a[0]}}),{c(){N(e.$$.fragment)},l(l){U(e.$$.fragment,l)},m(l,n){W(e,l,n),t=!0},p(l,n){const s={};n&1&&(s.session=l[0]),e.$set(s)},i(l){t||(q(e.$$.fragment,l),t=!0)},o(l){F(e.$$.fragment,l),t=!1},d(l){j(e,l)}}}function qe(a){let e,t;return e=new ke({}),{c(){N(e.$$.fragment)},l(l){U(e.$$.fragment,l)},m(l,n){W(e,l,n),t=!0},p:O,i(l){t||(q(e.$$.fragment,l),t=!0)},o(l){F(e.$$.fragment,l),t=!1},d(l){j(e,l)}}}function Fe(a){let e,t,l,n;const s=[qe,Me],r=[];function d(i,o){return i[0]?1:0}return t=d(a),l=r[t]=s[t](a),{c(){e=k("div"),l.c()},l(i){e=p(i,"DIV",{});var o=w(e);l.l(o),o.forEach(b)},m(i,o){R(i,e,o),r[t].m(e,null),n=!0},p(i,[o]){let g=t;t=d(i),t===g?r[t].p(i,o):(ye(),F(r[g],1,1,()=>{r[g]=null}),Ee(),l=r[t],l?l.p(i,o):(l=r[t]=s[t](i),l.c()),q(l,1),l.m(e,null))},i(i){n||(q(l),n=!0)},o(i){F(l),n=!1},d(i){i&&b(e),r[t].d()}}}function Pe(a,e,t){let l;return me(()=>{Y.auth.getSession().then(({data:n})=>{t(0,l=n.session)}),Y.auth.onAuthStateChange((n,s)=>{t(0,l=s)})}),[l]}class Je extends G{constructor(e){super(),J(this,e,Pe,Fe,K,{})}}export{Je as default};
