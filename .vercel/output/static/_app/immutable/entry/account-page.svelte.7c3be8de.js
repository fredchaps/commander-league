import{S as Z,i as ee,s as te,k as p,q as S,a as A,l as h,m as v,r as D,h as d,c as P,n as _,b as Q,D as n,R as T,o as z,ac as pe,Q as he,ad as ve,u as ge,T as ye,d as M,f as be,g as F,v as we,y as se,z as ae,A as re,B as ne}from"../chunks/index.8015430d.js";import{s as B}from"../chunks/superbaseClient.4f021c0e.js";import{A as Ee}from"../chunks/Auth.676f6375.js";function ke(u){let t,s,e,a,l,c,i,r,o,m;return{c(){t=p("section"),s=p("div"),e=p("div"),a=p("h2"),l=S("hello"),c=A(),i=p("p"),r=S(`Flowbite helps you connect with friends, family and communities of people who share your
				interests. Connecting with your friends and family as well as discovering new ones is easy
				with features like Groups, Watch and Marketplace.`),o=A(),m=p("input"),this.h()},l(g){t=h(g,"SECTION",{});var f=v(t);s=h(f,"DIV",{class:!0});var E=v(s);e=h(E,"DIV",{class:!0});var y=v(e);a=h(y,"H2",{class:!0});var b=v(a);l=D(b,"hello"),b.forEach(d),c=P(y),i=h(y,"P",{class:!0});var V=v(i);r=D(V,`Flowbite helps you connect with friends, family and communities of people who share your
				interests. Connecting with your friends and family as well as discovering new ones is easy
				with features like Groups, Watch and Marketplace.`),V.forEach(d),o=P(y),m=h(y,"INPUT",{class:!0}),y.forEach(d),E.forEach(d),f.forEach(d),this.h()},h(){_(a,"class","mb-4 text-4xl tracking-tight font-extrabold text-gray-900 dark:text-white"),_(i,"class","mb-8 font-light text-gray-500 sm:text-xl dark:text-gray-400"),_(m,"class","input"),_(e,"class","max-w-screen-md"),_(s,"class","py-8 px-4 mx-auto max-w-screen-xl sm:py-16 lg:px-6")},m(g,f){Q(g,t,f),n(t,s),n(s,e),n(e,a),n(a,l),n(e,c),n(e,i),n(i,r),n(e,o),n(e,m)},p:T,i:T,o:T,d(g){g&&d(t)}}}function xe(u,t,s){let{session:e}=t,a=!1,l=null,c=null,i=null;z(()=>{r()});const r=async()=>{try{a=!0;const{user:o}=e,{data:m,error:g,status:f}=await B.from("profiles").select("username, website, avatar_url").eq("id",o.id).single();if(g&&f!==406)throw g;m&&(console.log(m),l=m.username,c=m.website,i=m.avatar_url)}catch(o){o instanceof Error&&alert(o.message)}finally{a=!1}};return u.$$set=o=>{"session"in o&&s(0,e=o.session)},[e]}class $e extends Z{constructor(t){super(),ee(this,t,xe,ke,te,{session:0})}}function _e(u){let t,s,e;return{c(){t=p("div"),s=p("p"),e=S("Before you can play you'll need to set a username!"),this.h()},l(a){t=h(a,"DIV",{class:!0,role:!0});var l=v(t);s=h(l,"P",{});var c=v(s);e=D(c,"Before you can play you'll need to set a username!"),c.forEach(d),l.forEach(d),this.h()},h(){_(t,"class","alert variant-ghost-primary mb-5"),_(t,"role","alert")},m(a,l){Q(a,t,l),n(t,s),n(s,e)},d(a){a&&d(t)}}}function Ie(u){let t,s,e,a,l,c,i,r,o,m,g,f,E,y,b,V,U,C,j,J,x,q,K,O,$,L=u[1]?"Saving ...":"Update profile",G,X,le,w=!u[3]&&_e();return{c(){t=p("section"),s=p("div"),e=p("div"),a=p("div"),l=p("h1"),c=S("Edit Your Account"),i=A(),r=p("form"),w&&w.c(),o=A(),m=p("div"),g=p("label"),f=p("span"),E=S("Username"),y=A(),b=p("input"),V=A(),U=p("label"),C=p("span"),j=S("Email"),J=A(),x=p("input"),K=A(),O=p("div"),$=p("button"),G=S(L),this.h()},l(k){t=h(k,"SECTION",{});var I=v(t);s=h(I,"DIV",{class:!0});var oe=v(s);e=h(oe,"DIV",{class:!0});var H=v(e);a=h(H,"DIV",{class:!0});var ie=v(a);l=h(ie,"H1",{});var ce=v(l);c=D(ce,"Edit Your Account"),ce.forEach(d),ie.forEach(d),i=P(H),r=h(H,"FORM",{class:!0});var N=v(r);w&&w.l(N),o=P(N),m=h(N,"DIV",{});var R=v(m);g=h(R,"LABEL",{class:!0});var W=v(g);f=h(W,"SPAN",{});var ue=v(f);E=D(ue,"Username"),ue.forEach(d),y=P(W),b=h(W,"INPUT",{class:!0,type:!0,placeholder:!0}),W.forEach(d),V=P(R),U=h(R,"LABEL",{class:!0});var Y=v(U);C=h(Y,"SPAN",{});var fe=v(C);j=D(fe,"Email"),fe.forEach(d),J=P(Y),x=h(Y,"INPUT",{class:!0,type:!0,placeholder:!0}),Y.forEach(d),R.forEach(d),K=P(N),O=h(N,"DIV",{});var de=v(O);$=h(de,"BUTTON",{type:!0,class:!0});var me=v($);G=D(me,L),me.forEach(d),de.forEach(d),N.forEach(d),H.forEach(d),oe.forEach(d),I.forEach(d),this.h()},h(){_(a,"class","mb-5"),_(b,"class","input"),_(b,"type","text"),_(b,"placeholder","Username"),_(g,"class","label mb-6"),_(x,"class","input"),x.disabled=!0,_(x,"type","text"),_(x,"placeholder","Username"),x.value=q=u[0].user.email,_(U,"class","label mb-6"),_($,"type","submit"),_($,"class","btn variant-filled-primary"),$.disabled=u[1],_(r,"class","form-widget"),_(e,"class","max-w-screen-md"),_(s,"class","py-8 px-8 mx-auto max-w-screen-xl sm:py-16 lg:px-6")},m(k,I){Q(k,t,I),n(t,s),n(s,e),n(e,a),n(a,l),n(l,c),n(e,i),n(e,r),w&&w.m(r,null),n(r,o),n(r,m),n(m,g),n(g,f),n(f,E),n(g,y),n(g,b),pe(b,u[2]),n(m,V),n(m,U),n(U,C),n(C,j),n(U,J),n(U,x),n(r,K),n(r,O),n(O,$),n($,G),X||(le=[he(b,"input",u[5]),he(r,"submit",ve(u[4]))],X=!0)},p(k,[I]){k[3]?w&&(w.d(1),w=null):w||(w=_e(),w.c(),w.m(r,o)),I&4&&b.value!==k[2]&&pe(b,k[2]),I&1&&q!==(q=k[0].user.email)&&x.value!==q&&(x.value=q),I&2&&L!==(L=k[1]?"Saving ...":"Update profile")&&ge(G,L),I&2&&($.disabled=k[1])},i:T,o:T,d(k){k&&d(t),w&&w.d(),X=!1,ye(le)}}}function Ue(u,t,s){let{session:e}=t,a=!1,l=null,c=null,i=null,r=!1;z(()=>{o()});const o=async()=>{try{s(1,a=!0);const{user:f}=e,{data:E,error:y,status:b}=await B.from("profiles").select("username, website, avatar_url").eq("id",f.id).single();if(y&&b!==406)throw y;E&&(s(2,l=E.username),c=E.website,i=E.avatar_url,s(3,r=!!E.username))}catch(f){f instanceof Error&&alert(f.message)}finally{s(1,a=!1)}},m=async()=>{try{s(1,a=!0);const{user:f}=e,E={id:f.id,username:l,website:c,avatar_url:i,updated_at:new Date().toISOString()};let{error:y}=await B.from("profiles").upsert(E);if(y)throw y}catch(f){f instanceof Error&&alert(f.message)}finally{s(1,a=!1)}};function g(){l=this.value,s(2,l)}return u.$$set=f=>{"session"in f&&s(0,e=f.session)},[e,a,l,r,m,g]}class Ae extends Z{constructor(t){super(),ee(this,t,Ue,Ie,te,{session:0})}}function Pe(u){let t,s;return t=new $e({props:{session:u[0]}}),{c(){se(t.$$.fragment)},l(e){ae(t.$$.fragment,e)},m(e,a){re(t,e,a),s=!0},p(e,a){const l={};a&1&&(l.session=e[0]),t.$set(l)},i(e){s||(F(t.$$.fragment,e),s=!0)},o(e){M(t.$$.fragment,e),s=!1},d(e){ne(t,e)}}}function Se(u){let t,s;return t=new Ae({props:{session:u[0]}}),{c(){se(t.$$.fragment)},l(e){ae(t.$$.fragment,e)},m(e,a){re(t,e,a),s=!0},p(e,a){const l={};a&1&&(l.session=e[0]),t.$set(l)},i(e){s||(F(t.$$.fragment,e),s=!0)},o(e){M(t.$$.fragment,e),s=!1},d(e){ne(t,e)}}}function De(u){let t,s;return t=new Ee({}),{c(){se(t.$$.fragment)},l(e){ae(t.$$.fragment,e)},m(e,a){re(t,e,a),s=!0},p:T,i(e){s||(F(t.$$.fragment,e),s=!0)},o(e){M(t.$$.fragment,e),s=!1},d(e){ne(t,e)}}}function Ve(u){let t,s,e,a;const l=[De,Se,Pe],c=[];function i(r,o){return r[0]?r[1]?2:1:0}return s=i(u),e=c[s]=l[s](u),{c(){t=p("div"),e.c()},l(r){t=h(r,"DIV",{});var o=v(t);e.l(o),o.forEach(d)},m(r,o){Q(r,t,o),c[s].m(t,null),a=!0},p(r,[o]){let m=s;s=i(r),s===m?c[s].p(r,o):(we(),M(c[m],1,1,()=>{c[m]=null}),be(),e=c[s],e?e.p(r,o):(e=c[s]=l[s](r),e.c()),F(e,1),e.m(t,null))},i(r){a||(F(e),a=!0)},o(r){M(e),a=!1},d(r){r&&d(t),c[s].d()}}}function Ne(u,t,s){let e;z(()=>{B.auth.getSession().then(({data:i})=>{s(0,e=i.session)}),B.auth.onAuthStateChange((i,r)=>{s(0,e=r)})});let a=!1,l=null;z(()=>{c()});const c=async()=>{try{a=!0;const{data:i,error:r,status:o}=await B.from("profiles").select("username").eq("id",e==null?void 0:e.user.id).single();if(r&&o!==406)throw r;i&&(console.log(i),s(1,l=i.username))}catch(i){i instanceof Error&&alert(i.message)}finally{a=!1}};return[e,l]}class qe extends Z{constructor(t){super(),ee(this,t,Ne,Ve,te,{})}}export{qe as default};
